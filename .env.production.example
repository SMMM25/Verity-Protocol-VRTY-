# ============================================================
# Verity Protocol - PRODUCTION Environment Variables
# ============================================================
#
# SECURITY NOTICE: This file contains EXAMPLE values only.
# - NEVER commit actual secrets to the repository
# - Use a secrets manager (AWS Secrets Manager, HashiCorp Vault, etc.)
# - Rotate all secrets regularly (recommended: every 90 days)
#
# Copy this file and set via:
# - GitHub Secrets (for CI/CD)
# - Railway/Vercel/Render environment variables
# - AWS Secrets Manager / Parameter Store
# - Docker secrets
# ============================================================

# ============================================================
# CRITICAL - Database (REQUIRED)
# ============================================================

# PostgreSQL Connection (Railway/Supabase/Neon/AWS RDS)
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=public
DATABASE_URL="postgresql://verity_prod:STRONG_PASSWORD@prod-db.example.com:5432/verity_protocol?schema=public&connection_limit=20&pool_timeout=30"

# Database Pool Settings
DATABASE_POOL_MIN="5"
DATABASE_POOL_MAX="20"
DATABASE_CONNECTION_TIMEOUT="30000"

# ============================================================
# CRITICAL - Application Core (REQUIRED)
# ============================================================

# Environment
NODE_ENV="production"

# API Configuration
API_PORT="3000"
API_HOST="0.0.0.0"
API_VERSION="v1"
API_BASE_URL="https://api.verityprotocol.io"

# Frontend URL (for CORS and redirects)
FRONTEND_URL="https://www.verityprotocol.io"
ALLOWED_ORIGINS="https://www.verityprotocol.io,https://app.verityprotocol.io"

# ============================================================
# CRITICAL - Authentication & Security (REQUIRED)
# ============================================================

# JWT Configuration (GENERATE STRONG RANDOM STRINGS - min 64 chars)
JWT_SECRET="GENERATE_64_CHAR_RANDOM_STRING_FOR_PRODUCTION_USE_openssl_rand_hex_32"
JWT_REFRESH_SECRET="GENERATE_64_CHAR_RANDOM_STRING_FOR_REFRESH_TOKENS_openssl_rand_hex_32"
JWT_ACCESS_EXPIRATION="15m"
JWT_REFRESH_EXPIRATION="7d"

# API Key Encryption (for storing user API keys)
API_KEY_ENCRYPTION_KEY="GENERATE_32_BYTE_HEX_KEY_FOR_API_KEY_ENCRYPTION"

# Session Secret
SESSION_SECRET="GENERATE_64_CHAR_RANDOM_STRING_FOR_SESSIONS"

# CORS Settings
CORS_ORIGIN="https://www.verityprotocol.io"
CORS_CREDENTIALS="true"

# ============================================================
# CRITICAL - XRPL Configuration (REQUIRED)
# ============================================================

# XRPL Network (mainnet for production)
XRPL_NETWORK="mainnet"

# XRPL RPC Endpoints (use multiple for redundancy)
XRPL_MAINNET_URL="wss://xrplcluster.com"
XRPL_MAINNET_FALLBACK_1="wss://s1.ripple.com"
XRPL_MAINNET_FALLBACK_2="wss://s2.ripple.com"

# Testnet URLs (for staging environment)
XRPL_TESTNET_URL="wss://s.altnet.rippletest.net:51233"

# VRTY Token Issuer (Mainnet)
VRTY_ISSUER_ADDRESS="rBeHfq9vRjZ8Cth1sMbp2nJvExmxSxAH8f"
VERITY_ISSUER_ADDRESS="rBeHfq9vRjZ8Cth1sMbp2nJvExmxSxAH8f"

# Founder/Treasury Address
FOUNDER_ADDRESS="rLmLMErLKDzWXyYmcZGHqQ3SCgTVJCVjA3"

# ============================================================
# CRITICAL - Wallet Seeds (REQUIRED - USE SECRETS MANAGER)
# ============================================================
# ⚠️ NEVER hardcode these - use secrets manager or secure environment
# Generate fresh seeds for production - do not reuse testnet seeds

# Treasury Wallet (holds VRTY reserves)
# TREASURY_WALLET_SEED="sEdXXXX_USE_SECRETS_MANAGER_XXXX"

# Relayer Wallet (for gasless transactions)
# RELAYER_WALLET_SEED="sEdXXXX_USE_SECRETS_MANAGER_XXXX"

# Bridge Escrow Wallet
# BRIDGE_ESCROW_SEED="sEdXXXX_USE_SECRETS_MANAGER_XXXX"

# Vesting/Escrow Release Bot
# RELEASE_BOT_WALLET_SEED="sEdXXXX_USE_SECRETS_MANAGER_XXXX"

# ============================================================
# CROSS-CHAIN BRIDGE Configuration
# ============================================================

# Bridge Network Mode
BRIDGE_NETWORK="mainnet"
BRIDGE_ENABLED="true"

# Required Validator Signatures (3 of 5 recommended)
BRIDGE_REQUIRED_SIGNATURES="3"
BRIDGE_VALIDATOR_THRESHOLD="3"

# XRPL Bridge Escrow (Mainnet)
XRPL_BRIDGE_ESCROW="rMSx5CkHJqZA4QVwp9gbwNi2JqCqK4kMPQ"

# Solana Configuration
SOLANA_NETWORK="mainnet-beta"
SOLANA_RPC_URL="https://api.mainnet-beta.solana.com"
SOLANA_RPC_FALLBACK="https://solana-mainnet.rpc.extrnode.com"
SOLANA_WVRTY_MINT="YOUR_MAINNET_WVRTY_MINT_ADDRESS"
SOLANA_BRIDGE_PROGRAM="YOUR_BRIDGE_PROGRAM_ID"
SOLANA_TREASURY_WALLET="YOUR_TREASURY_ASSOCIATED_TOKEN_ACCOUNT"

# Solana Authority Keys (USE SECRETS MANAGER)
# SOLANA_MINT_AUTHORITY_KEYPAIR="[KEYPAIR_ARRAY_FROM_SECRETS_MANAGER]"
# SOLANA_FREEZE_AUTHORITY_KEYPAIR="[KEYPAIR_ARRAY_FROM_SECRETS_MANAGER]"

# Ethereum Configuration
ETHEREUM_RPC_URL="https://mainnet.infura.io/v3/YOUR_INFURA_KEY"
ETHEREUM_CHAIN_ID="1"
ETH_BRIDGE_CONTRACT="0x_YOUR_BRIDGE_CONTRACT_ADDRESS"
ETH_WVRTY_CONTRACT="0x_YOUR_WVRTY_ERC20_ADDRESS"

# Polygon Configuration
POLYGON_RPC_URL="https://polygon-mainnet.infura.io/v3/YOUR_INFURA_KEY"
POLYGON_CHAIN_ID="137"
POLYGON_BRIDGE_CONTRACT="0x_YOUR_POLYGON_BRIDGE_ADDRESS"
POLYGON_WVRTY_CONTRACT="0x_YOUR_POLYGON_WVRTY_ADDRESS"

# BSC Configuration
BSC_RPC_URL="https://bsc-dataseed.binance.org"
BSC_CHAIN_ID="56"
BSC_BRIDGE_CONTRACT="0x_YOUR_BSC_BRIDGE_ADDRESS"
BSC_WVRTY_CONTRACT="0x_YOUR_BSC_WVRTY_ADDRESS"

# Arbitrum Configuration
ARBITRUM_RPC_URL="https://arb1.arbitrum.io/rpc"
ARBITRUM_CHAIN_ID="42161"
ARBITRUM_BRIDGE_CONTRACT="0x_YOUR_ARBITRUM_BRIDGE_ADDRESS"
ARBITRUM_WVRTY_CONTRACT="0x_YOUR_ARBITRUM_WVRTY_ADDRESS"

# Optimism Configuration
OPTIMISM_RPC_URL="https://mainnet.optimism.io"
OPTIMISM_CHAIN_ID="10"
OPTIMISM_BRIDGE_CONTRACT="0x_YOUR_OPTIMISM_BRIDGE_ADDRESS"
OPTIMISM_WVRTY_CONTRACT="0x_YOUR_OPTIMISM_WVRTY_ADDRESS"

# Bridge Validator Public Keys (comma-separated)
BRIDGE_VALIDATORS="validator1_pubkey,validator2_pubkey,validator3_pubkey,validator4_pubkey,validator5_pubkey"

# Bridge Relayer Wallet (EVM - for gas)
# EVM_RELAYER_PRIVATE_KEY="0x_YOUR_RELAYER_PRIVATE_KEY_FROM_SECRETS_MANAGER"

# ============================================================
# RELAYER Configuration
# ============================================================

RELAYER_ENABLED="true"
RELAYER_MIN_STAKE="1000"
RELAYER_MIN_TREASURY_BALANCE="500"
RELAYER_MAX_FEE_PER_TX="2"
RELAYER_REQUIRE_STAKE="true"
RELAYER_GLOBAL_RATE_LIMIT="500"
RELAYER_RATE_LIMIT_WINDOW="60000"
RELAYER_MAX_RETRIES="3"
RELAYER_RETRY_DELAY_MS="2000"
RELAYER_INTENT_EXPIRATION="300000"
RELAYER_ENABLE_CIRCUIT_BREAKER="true"
RELAYER_CIRCUIT_BREAKER_THRESHOLD="10"

# ============================================================
# GOVERNANCE Configuration
# ============================================================

# Multi-sig Configuration
GOVERNANCE_MULTISIG_ADDRESS="rYOUR_MULTISIG_ADDRESS"
GOVERNANCE_REQUIRED_SIGNERS="3"
GOVERNANCE_SIGNERS="rSigner1,rSigner2,rSigner3,rSigner4,rSigner5"

# Proposal Settings
GOVERNANCE_PROPOSAL_THRESHOLD="10000"
GOVERNANCE_VOTING_PERIOD_HOURS="72"
GOVERNANCE_QUORUM_PERCENTAGE="10"

# ============================================================
# XUMM Wallet Integration
# ============================================================

XUMM_API_KEY="YOUR_XUMM_API_KEY"
XUMM_API_SECRET="YOUR_XUMM_API_SECRET"
XUMM_WEBHOOK_SECRET="YOUR_XUMM_WEBHOOK_SECRET"

# ============================================================
# RATE LIMITING & SECURITY
# ============================================================

# Global Rate Limiting
RATE_LIMIT_ENABLED="true"
RATE_LIMIT_MAX_REQUESTS="100"
RATE_LIMIT_WINDOW_MS="60000"

# API Key Rate Limits (per tier)
RATE_LIMIT_BASIC="100"
RATE_LIMIT_PROFESSIONAL="500"
RATE_LIMIT_INSTITUTIONAL="2000"

# DDoS Protection
DDOS_PROTECTION_ENABLED="true"
DDOS_MAX_CONNECTIONS_PER_IP="50"

# ============================================================
# CACHING (Redis)
# ============================================================

REDIS_ENABLED="true"
REDIS_URL="redis://default:PASSWORD@redis-host:6379"
REDIS_TLS="true"
CACHE_TTL_SECONDS="300"
CACHE_MAX_ITEMS="10000"

# ============================================================
# MONITORING & LOGGING
# ============================================================

# Logging
LOG_LEVEL="info"
LOG_FORMAT="json"
LOG_TIMESTAMP="true"

# Sentry Error Tracking
SENTRY_DSN="https://YOUR_SENTRY_DSN@sentry.io/PROJECT_ID"
SENTRY_ENVIRONMENT="production"
SENTRY_TRACES_SAMPLE_RATE="0.1"

# DataDog APM (optional)
# DD_API_KEY="YOUR_DATADOG_API_KEY"
# DD_APP_KEY="YOUR_DATADOG_APP_KEY"
# DD_SERVICE="verity-protocol"

# Prometheus Metrics
METRICS_ENABLED="true"
METRICS_PORT="9090"
METRICS_PATH="/metrics"

# Health Check
HEALTH_CHECK_INTERVAL="30000"
HEALTH_CHECK_TIMEOUT="10000"

# ============================================================
# WEBHOOKS & NOTIFICATIONS
# ============================================================

# Slack Alerts
SLACK_WEBHOOK_URL="https://hooks.slack.com/services/YOUR/WEBHOOK/URL"
SLACK_ALERT_CHANNEL="#verity-alerts"

# Discord Alerts
DISCORD_WEBHOOK_URL="https://discord.com/api/webhooks/YOUR/WEBHOOK/URL"

# Email Alerts (SMTP)
SMTP_HOST="smtp.sendgrid.net"
SMTP_PORT="587"
SMTP_USER="apikey"
SMTP_PASSWORD="YOUR_SENDGRID_API_KEY"
ALERT_EMAIL_FROM="alerts@verityprotocol.io"
ALERT_EMAIL_TO="ops@verityprotocol.io"

# ============================================================
# FEATURE FLAGS
# ============================================================

FEATURE_BRIDGE_ENABLED="true"
FEATURE_STAKING_ENABLED="true"
FEATURE_GOVERNANCE_ENABLED="true"
FEATURE_SIGNALS_ENABLED="true"
FEATURE_TOKENIZATION_ENABLED="true"
FEATURE_SENTINEL_ENABLED="true"
FEATURE_TAX_ENGINE_ENABLED="true"
FEATURE_DEX_ENABLED="true"

# ============================================================
# MAINTENANCE MODE
# ============================================================

MAINTENANCE_MODE="false"
MAINTENANCE_MESSAGE="Verity Protocol is undergoing scheduled maintenance. Please try again later."
MAINTENANCE_ALLOWED_IPS=""

# ============================================================
# BACKUP & DISASTER RECOVERY
# ============================================================

# AWS S3 Backup (optional)
# AWS_ACCESS_KEY_ID="YOUR_AWS_ACCESS_KEY"
# AWS_SECRET_ACCESS_KEY="YOUR_AWS_SECRET_KEY"
# AWS_REGION="us-east-1"
# S3_BACKUP_BUCKET="verity-protocol-backups"

# Database Backup Schedule (cron)
DB_BACKUP_ENABLED="true"
DB_BACKUP_SCHEDULE="0 */6 * * *"
DB_BACKUP_RETENTION_DAYS="30"

# ============================================================
# END OF CONFIGURATION
# ============================================================
#
# DEPLOYMENT CHECKLIST:
# [ ] All CRITICAL variables are set
# [ ] Wallet seeds are in secrets manager (NOT environment variables)
# [ ] Database URL points to production database
# [ ] JWT secrets are unique 64+ character strings
# [ ] CORS origins are restricted to your domains
# [ ] Rate limiting is enabled
# [ ] Sentry DSN is configured for error tracking
# [ ] Slack/Discord webhooks are set for alerts
# [ ] Feature flags are reviewed
# [ ] Maintenance mode is OFF
#
# SECURITY CHECKLIST:
# [ ] Rotate all secrets every 90 days
# [ ] Use secrets manager for wallet seeds
# [ ] Enable TLS for all connections
# [ ] Review access logs regularly
# [ ] Set up automated security scans
# ============================================================
